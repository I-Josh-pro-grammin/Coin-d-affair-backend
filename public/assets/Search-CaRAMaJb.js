import{c as L,r as g,f as _,e as F,j as s,a6 as y,L as z}from"./index-OYdop1FP.js";import{N as u,F as f}from"./Footer-mNu1pnuN.js";import{L as R}from"./Loader-Cl_kAK5i.js";import{F as $}from"./filter-C9JEPFJv.js";import{S as E}from"./search-yFQyLgk4.js";import"./Logo-DIka_k_q.js";import"./user-CStstmQ6.js";import"./input-BZgoSqEo.js";import"./arrow-right-BHQlH6db.js";import"./map-pin-CivTrGbb.js";import"./mail-CHLPCqjR.js";import"./phone-De1exTV0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=L("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);function M(){const[n,j]=g.useState([]),[i,N]=g.useState([0,2e6]),[m,v]=g.useState("all"),{data:d,isLoading:b}=_(),{data:o}=F(),x=(d==null?void 0:d.listings)||[],h=(e,a)=>String((e==null?void 0:e.business_id)??(e==null?void 0:e.listing_id)??(e==null?void 0:e.id)??(e==null?void 0:e.category_id)??(e==null?void 0:e.external_id)??`no-id-${a??"unknown"}`),w=(o==null?void 0:o.categories)??o??[],S=[{key:"all",label:"Toutes",value:"all"},...w.map((e,a)=>{const l=(e==null?void 0:e.name)??(e==null?void 0:e.nameFr)??(e==null?void 0:e.category_name)??(e==null?void 0:e.title)??String(e??""),t=(e==null?void 0:e.slug)||(e==null?void 0:e.category_slug)||(l||"").toLowerCase().replace(/\s+/g,"-");return{key:(e==null?void 0:e.id)??(e==null?void 0:e.category_id)??t??`cat-${a}`,label:l,value:t}})],k=e=>((e==null?void 0:e.title)||(e==null?void 0:e.name)||"").toString(),C=e=>(e==null?void 0:e.category_slug)||(e==null?void 0:e.slug)||((e==null?void 0:e.category_name)||(e==null?void 0:e.category)||"").toString().toLowerCase().replace(/\s+/g,"-");return g.useEffect(()=>{if(!x||x.length===0){j(a=>a.length?[]:a);return}const e=x.filter(a=>{k(a).toLowerCase();const l=C(a),t=m==="all"||l===m,r=Number((a==null?void 0:a.price)??(a==null?void 0:a.amount)??0),c=r>=i[0]&&r<=i[1];return t&&c});j(a=>a.length===e.length&&a.every((l,t)=>h(l,t)===h(e[t],t))?a:e)},[x,m,i]),b?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(u,{}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(R,{message:"Recherche en cours..."})}),s.jsx(f,{})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(u,{}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"w-full md:w-64 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 sticky top-24",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx($,{size:20,className:"text-[#000435]"}),s.jsx("h2",{className:"font-bold text-gray-900",children:"Filtres"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Catégories"}),s.jsx("div",{className:"space-y-2",children:S.map((e,a)=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"category",value:e.value,checked:m===e.value,onChange:l=>v(l.target.value),className:"text-[#000435] focus:ring-[#000435]"}),s.jsx("span",{className:"text-sm text-gray-600",children:String(e.label)})]},a))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Prix"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"range",min:"0",max:"2000000",step:"10000",value:i[1],onChange:e=>N([i[0],parseInt(e.target.value)]),className:"w-full accent-[#000435]"}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:y(i[0])}),s.jsx("span",{children:y(i[1])})]})]})]})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900"}),s.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-[#000435] md:hidden",children:[s.jsx(I,{size:20}),"Filtres"]})]}),(n==null?void 0:n.length)>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n==null?void 0:n.map((e,a)=>{var r,c;const l=h(e,a)||`idx-${a}`,t=(e==null?void 0:e.title)||(e==null?void 0:e.name)||"Produit";return s.jsx(z,{to:`/produit/${encodeURIComponent(l)}`,className:"group",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition-all",children:[s.jsx("div",{className:"aspect-square bg-gray-100 relative overflow-hidden",children:s.jsx("img",{src:((c=(r=e==null?void 0:e.media)==null?void 0:r[0])==null?void 0:c.url)||e.image||"https://via.placeholder.com/400",alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),s.jsxs("div",{className:"p-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:String((e==null?void 0:e.category_name)||(e==null?void 0:e.category)||"")}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-2 truncate",children:t}),s.jsx("p",{className:"text-lg font-bold text-[#000435]",children:y(e==null?void 0:e.price)})]})]})},String(a))})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow-sm",children:[s.jsx(E,{size:48,className:"mx-auto text-gray-300 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-gray-600",children:"Essayez de modifier vos termes de recherche ou vos filtres"})]})]})]})}),s.jsx(f,{})]})}export{M as default};
