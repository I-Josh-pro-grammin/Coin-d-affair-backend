import{g as b,R as d,j as a,L as y,a6 as w}from"./index-OYdop1FP.js";import{H as u}from"./Footer-mNu1pnuN.js";const m="cdf_favorites_v1";function g(){try{const e=localStorage.getItem(m);if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s.map(String):[]}catch{return[]}}function j(e){try{const s=new Set(g());s.add(String(e)),localStorage.setItem(m,JSON.stringify(Array.from(s)))}catch{}}function N(e){try{const s=new Set(g());s.delete(String(e)),localStorage.setItem(m,JSON.stringify(Array.from(s)))}catch{}}function _({product:e,onClick:s}){b();const[f,l]=d.useState(!1),c=(e==null?void 0:e.listings_id)||e.id,r=c?String(c):void 0,h=(e==null?void 0:e.title)||(e==null?void 0:e.name);let n="/placeholder.svg";try{if(Array.isArray(e==null?void 0:e.media)&&e.media.length){const t=e.media[0];t&&typeof t=="object"&&"url"in t&&t.url?n=String(t.url):typeof t=="string"&&(n=t)}else e!=null&&e.cover_image?n=String(e.cover_image):e!=null&&e.image_url&&(n=String(e.image_url))}catch{}const v=n,x=(e==null?void 0:e.category_name)||(e==null?void 0:e.category);return d.useEffect(()=>{if(!r)return;const t=()=>{const o=g();l(o.includes(String(r)))};t(),window.addEventListener("cdf:favoritesChanged",t);const i=o=>{(o.key===null||o.key==="cdf_favorites_v1")&&t()};return window.addEventListener("storage",i),()=>{window.removeEventListener("cdf:favoritesChanged",t),window.removeEventListener("storage",i)}},[r]),a.jsxs(y,{to:`/produit/${r}`,onClick:s,className:"group bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-[1.02] overflow-hidden cursor-pointer border-2 border-transparent hover:border-[#000435]",children:[a.jsxs("div",{className:"relative w-full aspect-square overflow-hidden bg-gray-100",children:[a.jsx("img",{src:v,alt:h||"Produit",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:t=>{t.currentTarget.src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.badge&&a.jsx("span",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-medium shadow-sm ${e.badge==="Nouveau"?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:e.badge}),a.jsx("span",{className:"absolute top-3 left-3 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-gray-700 shadow-sm",children:e.subcategory||x}),a.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();const i=r;if(i){f?(N(i),l(!1)):(j(i),l(!0));try{window.dispatchEvent(new CustomEvent("cdf:favoritesChanged"))}catch{}}},className:"absolute bottom-3 right-3 w-9 h-9 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors opacity-0 group-hover:opacity-100","aria-label":"Ajouter aux favoris",children:a.jsx(u,{className:`w-5 h-5 transition-colors ${f?"text-red-500":"text-gray-600 hover:text-red-500"}`})})]}),a.jsxs("div",{className:"p-3 md:p-5",children:[a.jsx("h3",{className:"text-sm md:text-lg font-semibold text-gray-900 mb-1 md:mb-2 line-clamp-2 group-hover:text-[#000435] transition-colors",children:h}),e.location&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:e.location}),a.jsx("div",{className:"mb-2 md:mb-4",children:a.jsx("p",{className:"text-lg md:text-2xl font-bold text-[#000435]",children:w(e.price)})}),a.jsx("div",{className:"hidden md:flex w-full py-2.5 px-4 bg-[#000435]/5 text-[#000435] font-medium rounded-full hover:bg-[#000435] hover:text-white transition-all duration-300 items-center justify-center",children:"Voir les d√©tails"})]})]})}export{_ as P,g};
