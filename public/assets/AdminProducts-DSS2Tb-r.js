import{c as S,r as h,at as z,au as E,av as L,j as e,h as l}from"./index-OYdop1FP.js";import{A as p}from"./AdminLayout-DN8Mdb-z.js";import{L as R}from"./Loader-Cl_kAK5i.js";import{S as M}from"./search-yFQyLgk4.js";import{E as d}from"./eye-BVk4yksF.js";import{C as y}from"./circle-x-BgZ84FNJ.js";import{E as j}from"./eye-off-Bp6SI37F.js";import{E as b}from"./ellipsis-vertical-DZ3OL_Fh.js";import"./Logo-DIka_k_q.js";import"./shield-NSqSHFdi.js";import"./chevron-down-DuasZ1GO.js";import"./settings-vvn4CTqi.js";import"./layout-dashboard-DXxK-L7L.js";import"./package-Bt9ERok5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=S("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function H(){var u;const[m,v]=h.useState(""),[n,N]=h.useState("all"),{data:o,isLoading:w,refetch:g}=z({q:m}),[k]=E(),[C]=L(),r=async(t,a)=>{var c;try{await k({listingId:t,action:a}).unwrap(),l.success(`Statut du produit mis à jour (${a})`),g()}catch(x){const A=((c=x==null?void 0:x.data)==null?void 0:c.message)||"Erreur lors de la mise à jour du statut";l.error(A)}},_=async t=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce produit ?"))try{await C(t).unwrap(),l.success("Produit supprimé"),g()}catch{l.error("Erreur lors de la suppression")}},s=t=>t.is_visible?t.is_approved?"approved":t.is_approved===!1?"rejected":t.is_approved?"approved":"pending":"hidden",i=((u=o==null?void 0:o.listings)==null?void 0:u.filter(t=>{const a=s(t);return n==="all"||a===n}))||[];return w?e.jsxs(p,{children:[e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Chargement des produits..."})}),e.jsx(R,{})]}):e.jsxs(p,{children:[e.jsx("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Produits"}),e.jsx("p",{className:"text-gray-600",children:"Modérez tous les produits de la plateforme"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Rechercher par produit, vendeur ou catégorie...",value:m,onChange:t=>v(t.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:[{key:"all",label:"Tous"},{key:"pending",label:"En attente"},{key:"approved",label:"Approuvés"},{key:"rejected",label:"Rejetés"},{key:"hidden",label:"Masqués"}].map(t=>e.jsx("button",{onClick:()=>N(t.key),className:`flex items-center gap-2 px-4 py-2 rounded-full border text-sm font-medium transition-all ${n===t.key?"bg-[#000435] text-white border-[#000435]":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:t.label},t.key))})]})}),e.jsx("div",{className:"hidden md:block bg-white rounded-2xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Produit"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Vendeur"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Catégorie"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Prix"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Statut"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Créé le"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("p",{className:"font-semibold text-gray-900",children:t.title})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-700",children:t.business_name||"N/A"}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-700",children:t.category_id||"N/A"}),e.jsxs("td",{className:"py-4 px-6 font-semibold text-gray-900",children:[t.price," ",t.currency]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${s(t)==="pending"?"bg-yellow-100 text-yellow-800":s(t)==="approved"?"bg-green-100 text-green-800":s(t)==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[s(t)==="pending"&&"En attente",s(t)==="approved"&&"Approuvé",s(t)==="rejected"&&"Rejeté",s(t)==="hidden"&&"Masqué"]})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-700",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:text-[#000435] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir",children:e.jsx(d,{size:18})}),s(t)!=="approved"&&e.jsx("button",{onClick:()=>r(t.listings_id,"approve"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approuver",children:e.jsx(f,{size:18})}),s(t)!=="rejected"&&e.jsx("button",{onClick:()=>r(t.listings_id,"reject"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Rejeter",children:e.jsx(y,{size:18})}),s(t)!=="hidden"?e.jsx("button",{onClick:()=>r(t.listings_id,"hide"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Masquer",children:e.jsx(j,{size:18})}):e.jsx("button",{onClick:()=>r(t.listings_id,"unhide"),className:"p-2 text-gray-600 hover:text-[#000435] hover:bg-gray-100 rounded-lg transition-colors",title:"Rendre visible",children:e.jsx(d,{size:18})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(b,{size:18})})]})})]},t.listings_id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-10 text-center text-gray-500 text-sm",children:"Aucun produit ne correspond à votre recherche ou filtre."})})]})]})})}),e.jsxs("div",{className:"md:hidden grid grid-cols-1 gap-4",children:[i.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500",children:t.business_name||"N/A"})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(t)==="pending"?"bg-yellow-100 text-yellow-800":s(t)==="approved"?"bg-green-100 text-green-800":s(t)==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[s(t)==="pending"&&"En attente",s(t)==="approved"&&"Approuvé",s(t)==="rejected"&&"Rejeté",s(t)==="hidden"&&"Masqué"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:t.category_id||"N/A"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[t.price," ",t.currency]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-100 flex justify-end gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",title:"Voir",children:e.jsx(d,{size:20})}),s(t)!=="approved"&&e.jsx("button",{onClick:()=>r(t.listings_id,"approve"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Approuver",children:e.jsx(f,{size:20})}),s(t)!=="rejected"&&e.jsx("button",{onClick:()=>r(t.listings_id,"reject"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Rejeter",children:e.jsx(y,{size:20})}),s(t)!=="hidden"?e.jsx("button",{onClick:()=>r(t.listings_id,"hide"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",title:"Masquer",children:e.jsx(j,{size:20})}):e.jsx("button",{onClick:()=>r(t.listings_id,"unhide"),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg",title:"Rendre visible",children:e.jsx(d,{size:20})}),e.jsx("button",{onClick:()=>_(t.listings_id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg",children:e.jsx(b,{size:20})})]})]},t.listings_id)),i.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500 text-sm bg-white rounded-xl",children:"Aucun produit trouvé."})]})]})}export{H as default};
