import{r as l,e as k,ac as I,ad as z,j as e,Y as E,_ as A,h as o}from"./index-OYdop1FP.js";import{A as M,F as q}from"./AdminLayout-DN8Mdb-z.js";import{P as D}from"./plus-BeFLVBGe.js";import{S as P}from"./search-yFQyLgk4.js";import{C as L}from"./chevron-right-D6iiIXBw.js";import{S as R}from"./square-pen-DLvJjRik.js";import{T as _}from"./trash-2-BjRiz3Rx.js";import{S as T}from"./save-BoBVndYK.js";import"./Logo-DIka_k_q.js";import"./shield-NSqSHFdi.js";import"./chevron-down-DuasZ1GO.js";import"./settings-vvn4CTqi.js";import"./layout-dashboard-DXxK-L7L.js";import"./package-Bt9ERok5.js";function ee(){const[h,n]=l.useState(!1),[d,u]=l.useState(null),[r,t]=l.useState({name:"",nameFr:"",icon:"",description:"",parentId:null}),{data:c,isLoading:f,refetch:b}=k({}),[j]=I(),[v]=z(),m=(c==null?void 0:c.categories)||[],[p,y]=l.useState([]);if(f)return e.jsx(E,{});const N=s=>{y(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},C=()=>{u(null),t({name:"",nameFr:"",icon:"",description:"",parentId:null}),n(!0)},w=s=>{u(s),t({name:s.name,nameFr:s.nameFr,icon:s.icon,description:s.description||"",parentId:s.parentId||null}),n(!0)},F=s=>{o.error("Suppression non impl√©ment√©e dans l'API pour le moment")},S=async s=>{s.preventDefault();try{d?o.error("Modification non impl√©ment√©e dans l'API pour le moment"):(r.parentId?await v({category_id:r.parentId,name:r.name,name_fr:r.nameFr}).unwrap():await j({name:r.name,name_fr:r.nameFr,icon:r.icon,description:r.description}).unwrap(),o.success("Cat√©gorie cr√©√©e avec succ√®s"),b()),n(!1)}catch{o.error("Erreur lors de l'enregistrement")}};return e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestion des Cat√©gories"}),e.jsxs("p",{className:"text-gray-600",children:[m.length," cat√©gories principales"]})]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-[#000435] text-white px-6 py-3 rounded-full font-medium hover:bg-[#000435]/90 transition-all shadow-md hover:shadow-lg",children:[e.jsx(D,{size:20}),"Nouvelle Cat√©gorie"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Rechercher une cat√©gorie...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(s=>{var a,i,g;return e.jsxs("div",{children:[e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[((a=s.subcategories)==null?void 0:a.length)>0&&e.jsx("button",{onClick:()=>N(s.id),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:e.jsx(L,{size:20,className:`text-gray-600 transition-transform ${p.includes(s.id)?"rotate-90":""}`})}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.nameFr}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.name,")"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.productCount||0," produits",((i=s.subcategories)==null?void 0:i.length)>0&&` ‚Ä¢ ${s.subcategories.length} sous-cat√©gories`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w(s),className:"p-2 text-gray-600 hover:text-[#000435] hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(R,{size:18})}),e.jsx("button",{onClick:()=>F(),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_,{size:18})})]})]})}),p.includes(s.id)&&((g=s.subcategories)==null?void 0:g.length)>0&&e.jsx("div",{className:"bg-gray-50 border-t border-gray-200",children:s.subcategories.map(x=>e.jsx("div",{className:"pl-20 pr-6 py-4 flex items-center justify-between hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx(q,{size:18,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:x.nameFr}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.productCount||0," produits"]})]})]})},x.id))})]},s.id)})})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d?"Modifier la cat√©gorie":"Nouvelle cat√©gorie"}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(A,{size:24})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom (Fran√ßais) *"}),e.jsx("input",{type:"text",required:!0,value:r.nameFr,onChange:s=>t({...r,nameFr:s.target.value}),placeholder:"Ex: √âlectronique",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom (Anglais) *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:s=>t({...r,name:s.target.value}),placeholder:"Ex: Electronics",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ic√¥ne (Emoji) ",!r.parentId&&"*"]}),e.jsx("input",{type:"text",required:!r.parentId,value:r.icon,onChange:s=>t({...r,icon:s.target.value}),placeholder:"üì±",maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all text-2xl"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Utilisez un emoji. Ex: üì±, üè†, üöó, üëó"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cat√©gorie parente (optionnel)"}),e.jsxs("select",{value:r.parentId||"",onChange:s=>t({...r,parentId:s.target.value?Number(s.target.value):null}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Aucune (cat√©gorie principale)"}),m.map(s=>e.jsx("option",{value:s.id,children:s.nameFr},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Laissez vide pour une cat√©gorie principale"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optionnel)"}),e.jsx("textarea",{value:r.description,onChange:s=>t({...r,description:s.target.value}),placeholder:"Description de la cat√©gorie...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all resize-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-full font-medium hover:bg-gray-50 transition-all",children:"Annuler"}),e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 bg-[#000435] text-white px-6 py-3 rounded-full font-medium hover:bg-[#000435]/90 transition-all shadow-md hover:shadow-lg",children:[e.jsx(T,{size:20}),d?"Mettre √† jour":"Cr√©er"]})]})]})]})})]})}export{ee as default};
