import{c as b,r as l,ai as v,aj as N,ak as w,j as e,h as c}from"./index-OYdop1FP.js";import{A as o,a as _}from"./AdminLayout-DN8Mdb-z.js";import{L as U}from"./Loader-Cl_kAK5i.js";import{S as k}from"./search-yFQyLgk4.js";import{S as d}from"./shield-NSqSHFdi.js";import{E as A}from"./eye-BVk4yksF.js";import{E as C}from"./ellipsis-vertical-DZ3OL_Fh.js";import"./Logo-DIka_k_q.js";import"./chevron-down-DuasZ1GO.js";import"./settings-vvn4CTqi.js";import"./layout-dashboard-DXxK-L7L.js";import"./package-Bt9ERok5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=b("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function X(){const[r,x]=l.useState(""),[i,m]=l.useState("all"),{data:s,isLoading:p,refetch:h}=v(),[u,y]=l.useState([]);l.useEffect(()=>{s!=null&&s.users&&y(s.users)},[s]);const[f]=N(),[g]=w(),j=async t=>{try{t.is_active?(await f(t.user_id).unwrap(),c.success("Utilisateur banni avec succès")):(await g(t.user_id).unwrap(),c.success("Utilisateur débanni avec succès")),h()}catch{c.error("Erreur lors de la mise à jour du statut de l'utilisateur")}},n=(u||[]).filter(t=>{if(i!=="all"&&t.account_type!==i)return!1;if(!r||r.trim()==="")return!0;const a=r.toLowerCase();return(t.email||"").toLowerCase().includes(a)||(t.full_name||"").toLowerCase().includes(a)});return p?e.jsxs(o,{children:[e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Chargement des utilisateurs..."})}),e.jsx(U,{})]}):e.jsxs(o,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Utilisateurs"}),e.jsxs("p",{className:"text-gray-600",children:[n.length," comptes trouvés"]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(k,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom ou email...",value:r,onChange:t=>x(t.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:[{key:"all",label:"Tous"},{key:"user",label:"Acheteurs"},{key:"business",label:"Vendeurs"},{key:"admin",label:"Admins"}].map(t=>e.jsx("button",{onClick:()=>m(t.key),className:`flex items-center gap-2 px-4 py-2 rounded-full border text-sm font-medium transition-all ${i===t.key?"bg-[#000435] text-white border-[#000435]":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:t.label},t.key))})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Utilisateur"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Rôle"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Vérifié"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Créé le"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Dernière activité"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#000435]/10 flex items-center justify-center text-sm font-bold text-[#000435]",children:t.full_name.split(" ").map(a=>a[0]).join("").slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.email})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[t.account_type==="user"&&"Acheteur",t.account_type==="business"&&"Vendeur",t.account_type==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:12}),"Admin"]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_verified?"Ouis":"Non"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Actif":"Banni"})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-700",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-700",children:"-"}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:text-[#000435] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir le profil",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:()=>j(t),className:`p-2 rounded-lg transition-colors ${t.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"}`,title:t.is_active?"Bannir":"Réactiver",children:t.is_active?e.jsx(S,{size:18}):e.jsx(_,{size:18})}),t.account_type!=="admin"&&e.jsx("button",{className:"p-2 text-gray-600 hover:text-[#000435] hover:bg-gray-100 rounded-lg transition-colors",title:"Promouvoir en admin (mock)",children:e.jsx(d,{size:18})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(C,{size:18})})]})})]},t.user_id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-10 text-center text-gray-500 text-sm",children:"Aucun utilisateur ne correspond à votre recherche."})})]})]})})})]})}export{X as default};
