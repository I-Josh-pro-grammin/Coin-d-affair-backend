import{c as N,p as w,r as m,j as e,h as p,d as k,q as _,s as C}from"./index-OYdop1FP.js";import{U as f}from"./upload-BqdF1x88.js";import{C as b}from"./check-BwX5OWL_.js";import{L as S}from"./loader-circle-Bl16au8U.js";import{B as q}from"./building-DA-AgxAH.js";import{S as z}from"./store-qjpP4EyE.js";import{M as B}from"./map-pin-CivTrGbb.js";import{A as V}from"./arrow-right-BHQlH6db.js";import{S as D}from"./shield-check-BiNqtWzi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=N("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function E({onSuccess:g}){const[l,{isLoading:u}]=w(),[t,c]=m.useState({id_type:"passport",id_number:"",whatsapp_number:"",location_city:"bujumbura"}),[o,a]=m.useState(null),[i,j]=m.useState(null),[d,s]=m.useState(null),x=(r,n)=>{r.target.files&&r.target.files[0]&&n(r.target.files[0])},v=async r=>{var y;if(r.preventDefault(),!o||!d){p.error("Veuillez télécharger votre pièce d'identité (recto) et un selfie.");return}const n=new FormData;n.append("id_type",t.id_type),n.append("id_number",t.id_number),n.append("whatsapp_number",t.whatsapp_number),n.append("location_city",t.location_city),n.append("document_front",o),i&&n.append("document_back",i),n.append("selfie",d);try{await l(n).unwrap(),p.success("Demande de vérification envoyée !"),g()}catch(h){p.error(((y=h==null?void 0:h.data)==null?void 0:y.message)||"Erreur lors de l'envoi"),console.error(h)}};return e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de pièce d'identité"}),e.jsxs("select",{value:t.id_type,onChange:r=>c({...t,id_type:r.target.value}),className:"w-full border-gray-300 rounded-lg p-2 border",children:[e.jsx("option",{value:"passport",children:"Passeport"}),e.jsx("option",{value:"national_id",children:"Carte d'identité Nationale"}),e.jsx("option",{value:"driving_license",children:"Permis de conduire"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro de la pièce"}),e.jsx("input",{type:"text",required:!0,value:t.id_number,onChange:r=>c({...t,id_number:r.target.value}),className:"w-full border-gray-300 rounded-lg p-2 border",placeholder:"Ex: 123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro WhatsApp"}),e.jsx("input",{type:"text",required:!0,value:t.whatsapp_number,onChange:r=>c({...t,whatsapp_number:r.target.value}),className:"w-full border-gray-300 rounded-lg p-2 border",placeholder:"+257 ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ville"}),e.jsx("input",{type:"text",required:!0,value:t.location_city,onChange:r=>c({...t,location_city:r.target.value}),className:"w-full border-gray-300 rounded-lg p-2 border"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:bg-gray-50 transition-colors",children:[e.jsx(f,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 cursor-pointer",children:[e.jsx("span",{children:"ID (Recto) *"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:r=>x(r,a)})]}),o&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center justify-center gap-1",children:[e.jsx(b,{size:12})," ",o.name]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:bg-gray-50 transition-colors",children:[e.jsx(f,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 cursor-pointer",children:[e.jsx("span",{children:"ID (Verso)"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:r=>x(r,j)})]}),i&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center justify-center gap-1",children:[e.jsx(b,{size:12})," ",i.name]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:bg-gray-50 transition-colors",children:[e.jsx(f,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 cursor-pointer",children:[e.jsx("span",{children:"Selfie *"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:r=>x(r,s)})]}),d&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center justify-center gap-1",children:[e.jsx(b,{size:12})," ",d.name]})]})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-[#000435] text-white py-3 rounded-xl font-medium hover:bg-[#000435]/90 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:u?e.jsx(S,{className:"animate-spin"}):"Envoyer pour vérification"})]})}function G(){const g=k(),[l,u]=m.useState(1),{user:t}=_(s=>s.auth),[c,{isLoading:o}]=C(),[a,i]=m.useState({businessType:"individual",shopName:"",categories:[],city:"",address:""}),j=async s=>{s.preventDefault();try{await c({user_id:t==null?void 0:t.userId,business_name:a.shopName,subscription_plan:"free",is_paid:!1}).unwrap(),p.success("Boutique configurée !"),u(3)}catch(x){console.error(x),p.error("Erreur lors de la configuration")}},d=()=>{g("/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:e.jsx(b,{size:20})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Compte créé"})]}),e.jsx("div",{className:"w-16 h-1 bg-[#000435]"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-[#000435] rounded-full flex items-center justify-center text-white font-bold",children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Configuration boutique"})]}),e.jsx("div",{className:"w-16 h-1 bg-[#000435]"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${l>=3?"bg-[#000435]":"bg-gray-200 text-gray-500"}`,children:"3"}),e.jsx("span",{className:`ml-2 text-sm font-medium ${l>=3?"text-gray-900":"text-gray-400"}`,children:"Vérification"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Configurez votre boutique"}),e.jsx("p",{className:"text-gray-600",children:"Quelques informations pour terminer votre inscription"})]}),l===1&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Bienvenue !"}),e.jsx("p",{className:"mb-8",children:"Votre compte est créé. Passons à la configuration de votre boutique."}),e.jsx("button",{onClick:()=>u(2),className:"bg-[#000435] text-white px-6 py-3 rounded-full",children:"Commencer"})]}),l===2&&e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(q,{className:"inline mr-2",size:18}),"Type d'entreprise *"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{type:"radio",name:"businessType",value:"individual",required:!0,className:"peer sr-only",onChange:s=>i({...a,businessType:s.target.value}),checked:a.businessType==="individual"}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-xl p-4 text-center peer-checked:border-[#000435] peer-checked:bg-blue-50 transition-all hover:border-gray-400",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Individu"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Vendeur particulier"})]})]}),e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{type:"radio",name:"businessType",value:"business",required:!0,className:"peer sr-only",onChange:s=>i({...a,businessType:s.target.value}),checked:a.businessType==="business"}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-xl p-4 text-center peer-checked:border-[#000435] peer-checked:bg-blue-50 transition-all hover:border-gray-400",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Entreprise"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Société enregistrée"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(z,{className:"inline mr-2",size:18}),"Nom de la boutique *"]}),e.jsx("input",{type:"text",required:!0,placeholder:"Ex: Ma Super Boutique",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all",value:a.shopName,onChange:s=>i({...a,shopName:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(T,{className:"inline mr-2",size:18}),"Catégories de produits"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Électronique","Maison & Jardin","Véhicules","Mode & Beauté","Sports & Loisirs"].map(s=>e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"categories",value:s,className:"peer sr-only"}),e.jsx("div",{className:"border-2 border-gray-300 rounded-lg p-3 text-sm peer-checked:border-[#000435] peer-checked:bg-blue-50 transition-all hover:border-gray-400",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(B,{className:"inline mr-2",size:18}),"Ville *"]}),e.jsxs("select",{required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all",value:a.city,onChange:s=>i({...a,city:s.target.value}),children:[e.jsx("option",{value:"",children:"Sélectionnez votre ville"}),e.jsx("option",{value:"bujumbura",children:"Bujumbura"}),e.jsx("option",{value:"gitega",children:"Gitega"}),e.jsx("option",{value:"ngozi",children:"Ngozi"}),e.jsx("option",{value:"rumonge",children:"Rumonge"}),e.jsx("option",{value:"kayanza",children:"Kayanza"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse de la boutique"}),e.jsx("input",{type:"text",placeholder:"123 Rue Example",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#000435] focus:border-transparent transition-all",value:a.address,onChange:s=>i({...a,address:s.target.value})})]}),e.jsxs("button",{type:"submit",disabled:o,className:"w-full bg-[#000435] text-white py-4 px-6 rounded-full font-medium hover:bg-[#000435]/90 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[o?"Traitement...":"Continuer vers la vérification",e.jsx(V,{size:20})]})]}),l===3&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-[#000435] mb-2"}),e.jsx("h2",{className:"text-xl font-bold",children:"Vérification d'identité"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pour assurer la sécurité de la plateforme, nous devons vérifier votre identité."})]}),e.jsx(E,{onSuccess:d})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Vous pourrez modifier ces informations plus tard dans les paramètres"})]})]})})}export{G as default};
