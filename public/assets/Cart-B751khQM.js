import{c as N,g as w,a7 as _,a8 as k,r as c,j as e,L as d,h as o}from"./index-OYdop1FP.js";import{B as m}from"./input-BZgoSqEo.js";import{N as x,F as h}from"./Footer-mNu1pnuN.js";import{L as C}from"./Loader-Cl_kAK5i.js";import{D as I,e as z,a as M,b as D,c as A}from"./dialog-BTLNXfFn.js";import{P as E}from"./phone-De1exTV0.js";import{M as L}from"./message-circle-C7SeSjzV.js";import{M as R}from"./mail-CHLPCqjR.js";import{T as S}from"./trash-2-BjRiz3Rx.js";import"./Logo-DIka_k_q.js";import"./user-CStstmQ6.js";import"./arrow-right-BHQlH6db.js";import"./map-pin-CivTrGbb.js";import"./Combination-DaXDwgqs.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=N("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),K=()=>{w();const l=localStorage.getItem("cart_id"),{data:a,isLoading:p,refetch:f}=_(l,{skip:!l}),[j,{isLoading:g}]=k(),[T,b]=c.useState(null),i=(a==null?void 0:a.items)||[],v=c.useMemo(()=>{const s={};return i.forEach(r=>{const t=r.seller_id;s[t]||(s[t]={seller:{id:t,name:r.business_name||r.seller_name,email:r.seller_email,phone:r.seller_phone,whatsapp:r.seller_whatsapp},items:[],total:0}),s[t].items.push(r),s[t].total+=Number(r.current_price)*r.quantity}),Object.values(s)},[i]),y=async s=>{try{await j(s).unwrap(),o.success("Article retiré du panier"),f()}catch{o.error("Erreur lors de la suppression")}},n=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(s);return p?e.jsx(C,{}):!l||i.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(x,{}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm text-center max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-[#000435] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Votre panier est vide"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Découvrez nos produits et trouvez votre bonheur."}),e.jsx(d,{to:"/boutique",children:e.jsx(m,{className:"bg-[#000435] text-white rounded-full px-8",children:"Aller à la boutique"})})]})}),e.jsx(h,{})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(x,{}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8 max-w-5xl",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Votre Panier"}),e.jsx("div",{className:"space-y-6",children:v.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"bg-gray-50/50 px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Vendu par"}),e.jsx("h3",{className:"text-lg font-bold text-[#000435]",children:s.seller.name})]}),e.jsxs(I,{children:[e.jsx(z,{asChild:!0,children:e.jsx(m,{className:"bg-[#000435] hover:bg-[#020657] text-white rounded-full",onClick:()=>b(s.seller),children:"Contacter le vendeur"})}),e.jsxs(M,{className:"sm:max-w-md",children:[e.jsx(D,{children:e.jsxs(A,{children:["Contacter ",s.seller.name]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Pour finaliser votre commande, veuillez contacter le vendeur directement via l'un des moyens ci-dessous."}),s.seller.phone&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:e.jsx(E,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Téléphone"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.seller.phone})]})]}),e.jsx("a",{href:`tel:${s.seller.phone}`,className:"text-[#000435] text-sm font-medium hover:underline",children:"Appeler"})]}),s.seller.whatsapp&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:e.jsx(L,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"WhatsApp"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.seller.whatsapp})]})]}),e.jsx("a",{href:`https://wa.me/${s.seller.whatsapp.replace(/\+/g,"")}?text=Bonjour, je suis intéressé par vos produits sur Akaguriro.`,target:"_blank",rel:"noopener noreferrer",className:"text-[#000435] text-sm font-medium hover:underline",children:"Discuter"})]}),s.seller.email&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center",children:e.jsx(R,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.seller.email})]})]}),e.jsx("a",{href:`mailto:${s.seller.email}?subject=Commande Akaguriro`,className:"text-[#000435] text-sm font-medium hover:underline",children:"Envoyer"})]}),!s.seller.phone&&!s.seller.whatsapp&&!s.seller.email&&e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded-lg text-sm",children:"Ce vendeur n'a pas encore renseigné ses informations de contact."})]})]})]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:s.items.map(r=>e.jsxs("div",{className:"p-6 flex gap-4 sm:gap-6",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200",children:r.image_url?e.jsx("img",{src:r.image_url.startsWith("http")?r.image_url:`https://coin-d-affair-backend.onrender.com/${r.image_url.replace(/\\/g,"/")}`,alt:r.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(u,{size:24})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{to:`/produit/${r.listings_id}`,className:"font-medium text-gray-900 hover:text-[#000435] line-clamp-2 mb-1",children:r.title}),e.jsx("p",{className:"text-[#000435] font-bold",children:n(r.current_price)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:e.jsxs("span",{children:["Quantité: ",r.quantity]})}),e.jsx("button",{onClick:()=>y(r.cart_item_id),className:"text-red-500 hover:text-red-600 p-2 hover:bg-red-50 rounded-full transition-colors",title:"Retirer du panier",disabled:g,children:e.jsx(S,{size:18})})]})]})]},r.cart_item_id))}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Total pour ce vendeur"}),e.jsx("span",{className:"text-xl font-bold text-[#000435]",children:n(s.total)})]})]},s.seller.id))})]}),e.jsx(h,{})]})};export{K as default};
