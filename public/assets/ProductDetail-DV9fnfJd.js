import{c as S,r as o,j as e,a as f,a2 as T,t as D,g as $,a3 as V,a4 as R,a5 as O,f as E,L as b,T as G,h as j}from"./index-OYdop1FP.js";import{N as H,H as B,F}from"./Footer-mNu1pnuN.js";import{P as Q}from"./ProductCard-tlWIJ2uh.js";import{L as W}from"./Loader-Cl_kAK5i.js";import{D as Z,a as J,b as K,c as U,d as X}from"./dialog-BTLNXfFn.js";import{B as x}from"./input-BZgoSqEo.js";import{C as Y}from"./circle-alert-No-UsYOL.js";import{P as ee}from"./phone-De1exTV0.js";import{M as se}from"./message-circle-C7SeSjzV.js";import{M as te}from"./mail-CHLPCqjR.js";import{G as ae}from"./globe-Dv7kOilX.js";import{C}from"./chevron-right-D6iiIXBw.js";import{P as k}from"./package-Bt9ERok5.js";import{M as re}from"./map-pin-CivTrGbb.js";import{S as _}from"./store-qjpP4EyE.js";import{S as ie}from"./shield-NSqSHFdi.js";import"./Logo-DIka_k_q.js";import"./user-CStstmQ6.js";import"./arrow-right-BHQlH6db.js";import"./Combination-DaXDwgqs.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=S("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=S("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ce=T("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),A=o.forwardRef(({className:i,variant:l,...n},r)=>e.jsx("div",{ref:r,role:"alert",className:f(ce({variant:l}),i),...n}));A.displayName="Alert";const oe=o.forwardRef(({className:i,...l},n)=>e.jsx("h5",{ref:n,className:f("mb-1 font-medium leading-none tracking-tight",i),...l}));oe.displayName="AlertTitle";const P=o.forwardRef(({className:i,...l},n)=>e.jsx("div",{ref:n,className:f("text-sm [&_p]:leading-relaxed",i),...l}));P.displayName="AlertDescription";const de=({isOpen:i,onClose:l,sellerName:n,phone:r,email:d,whatsapp:g,website:c})=>e.jsx(Z,{open:i,onOpenChange:l,children:e.jsxs(J,{className:"sm:max-w-md",children:[e.jsxs(K,{children:[e.jsxs(U,{children:["Contacter ",n]}),e.jsx(X,{children:"Choisissez un moyen de contact pour échanger directement avec le vendeur."})]}),e.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxs(A,{className:"bg-amber-50 border-amber-200 text-amber-800",children:[e.jsx(Y,{className:"h-4 w-4 text-amber-600"}),e.jsx(P,{className:"text-xs",children:"Les paiements et transactions se font directement entre acheteur et vendeur. La plateforme ne gère pas les paiements."})]}),r&&e.jsxs(x,{variant:"outline",className:"w-full justify-start gap-3 h-12 text-base",onClick:()=>window.open(`tel:${r.replace(/\s/g,"")}`,"_self"),children:[e.jsx(ee,{className:"h-5 w-5 text-gray-600"}),"Appeler ",r]}),g&&e.jsxs(x,{variant:"outline",className:"w-full justify-start gap-3 h-12 text-base",onClick:()=>window.open(`https://wa.me/${g.replace(/\D/g,"")}`,"_blank"),children:[e.jsx(se,{className:"h-5 w-5 text-green-600"}),"WhatsApp"]}),d&&e.jsxs(x,{variant:"outline",className:"w-full justify-start gap-3 h-12 text-base",onClick:()=>window.open(`mailto:${d}`,"_self"),children:[e.jsx(te,{className:"h-5 w-5 text-blue-600"}),"Envoyer un email"]}),c&&e.jsxs(x,{variant:"outline",className:"w-full justify-start gap-3 h-12 text-base",onClick:()=>window.open(c.startsWith("http")?c:`https://${c}`,"_blank"),children:[e.jsx(ae,{className:"h-5 w-5 text-indigo-600"}),"Visiter le site web"]}),!r&&!g&&!d&&!c&&e.jsx("div",{className:"text-center text-gray-500 py-4",children:"Aucune information de contact disponible pour ce vendeur."})]})]})});function Ie(){var w;const{id:i}=D(),[l,n]=o.useState(0),[r,d]=o.useState("details"),[g,c]=o.useState(!1),{user:y}=$(),[L,{isLoading:v}]=V(),[I]=R(),[M]=o.useState(()=>{let a=localStorage.getItem("session_token");return a||(a=Math.random().toString(36).substring(2),localStorage.setItem("session_token",a)),a}),{data:h,isLoading:z}=O(i||"",{skip:!i}),s=h==null?void 0:h.listing,{data:p}=E({categoryId:s==null?void 0:s.category_id,limit:5},{skip:!(s!=null&&s.category_id)}),N=((w=p==null?void 0:p.listings)==null?void 0:w.filter(a=>a.listings_id!==i))||[],q=async()=>{if(!y){j.error("Veuillez vous connecter pour ajouter au panier");return}try{let a=localStorage.getItem("cart_id");if(!a)try{const m=await I({user_id:y.userId,session_token:M}).unwrap()}catch{}await L({cart_id:a,listing_id:s.listings_id,sku_item_id:null,quantity:1,price_at_add:s.price}).unwrap(),j.success("Produit ajouté au panier")}catch(a){console.error(a),j.error("Impossible d'ajouter au panier (Erreur technique)")}};if(z)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:e.jsx(W,{message:"Chargement du produit..."})});if(!s)return e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Produit non trouvé"}),e.jsx(b,{to:"/",className:"text-[#000435] hover:underline",children:"Retour à l'accueil"})]})});const t={id:s.listings_id,name:s.title,price:Number(s.price),currency:s.currency,image:G(s),category:s.category_name,condition:s.condition,location:s.location||"Non spécifié",seller:{name:s.business_name||s.seller_name||"Vendeur",rating:4.5,totalSales:0,phone:s.phone,whatsapp:s.whatsapp,website:s.website_url},description:s.description,stock:s.stock,reviews:0,badge:""},u=t.image?[t.image]:[];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(H,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-600 mb-8",children:[e.jsx(b,{to:"/",className:"hover:text-[#000435]",children:"Accueil"}),e.jsx(C,{size:16}),e.jsx(b,{to:"/boutique",className:"hover:text-[#000435]",children:t.category}),e.jsx(C,{size:16}),e.jsx("span",{className:"text-gray-900",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full aspect-square overflow-hidden rounded-2xl bg-gray-100 mb-4",children:u.length>0?e.jsx("img",{src:u[l],alt:t.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:e.jsx(k,{size:64})})}),u.length>1&&e.jsx("div",{className:"grid grid-cols-3 gap-4",children:u.map((a,m)=>e.jsx("button",{onClick:()=>n(m),className:`relative aspect-square overflow-hidden rounded-xl bg-gray-100 border-2 transition-all ${l===m?"border-[#000435]":"border-transparent hover:border-gray-300"}`,children:e.jsx("img",{src:a,alt:`${t.name} ${m+1}`,className:"absolute inset-0 w-full h-full object-cover"})},m))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.name}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsxs("p",{className:"text-4xl font-bold text-[#000435]",children:[t.price.toLocaleString()," ",t.currency]}),t.badge==="Promo"]})]}),e.jsxs("div",{className:"flex items-center gap-6 mb-8 pb-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"État"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.condition||"Occasion"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-[#000435]"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t.location})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-[#000435] rounded-full flex items-center justify-center text-white",children:e.jsx(_,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vendeur"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:t.seller.name})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white px-3 py-1 rounded-full shadow-sm",children:[e.jsx(ne,{size:16,className:"fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-semibold",children:t.seller.rating})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-blue-50 p-3 rounded-lg border border-blue-100",children:"Ce vendeur a été vérifié par notre équipe. Contactez-le directement pour finaliser l'achat."})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{onClick:()=>c(!0),className:"flex-1 py-6 text-lg rounded-full bg-[#000435] hover:bg-[#000435]/90 font-semibold shadow-lg shadow-blue-900/10 transition-all hover:scale-[1.02]",children:"Contacter le vendeur"}),e.jsx(x,{onClick:q,disabled:v,className:"flex-1 py-6 text-lg rounded-full bg-white border-2 border-[#000435] text-[#000435] hover:bg-gray-50 font-semibold transition-all hover:scale-[1.02]",children:v?"Ajout...":"Ajouter au panier"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{className:"flex-1 py-3 px-4 border border-gray-200 text-gray-700 rounded-full hover:border-[#000435] hover:text-[#000435] transition-all font-medium flex items-center justify-center gap-2 bg-white","aria-label":"Ajouter aux favoris",children:[e.jsx(B,{size:18}),"Sauvegarder"]}),e.jsxs("button",{className:"flex-1 py-3 px-4 border border-gray-200 text-gray-700 rounded-full hover:border-[#000435] hover:text-[#000435] transition-all font-medium flex items-center justify-center gap-2 bg-white","aria-label":"Partager",children:[e.jsx(le,{size:18}),"Partager"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex justify-around items-center text-center",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Profils vérifiés"})]}),e.jsx("div",{className:"w-px h-8 bg-gray-200"}),e.jsxs("div",{children:[e.jsx(_,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Vente directe"})]}),e.jsx("div",{className:"w-px h-8 bg-gray-200"}),e.jsxs("div",{children:[e.jsx(k,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Zéro commissions"})]})]})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex gap-8 border-b border-gray-200 mb-6",children:[e.jsxs("button",{onClick:()=>d("details"),className:`pb-4 font-semibold transition-colors relative ${r==="details"?"text-[#000435]":"text-gray-600 hover:text-gray-900"}`,children:["Détails",r==="details"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#000435]"})]}),e.jsxs("button",{onClick:()=>d("specs"),className:`pb-4 font-semibold transition-colors relative ${r==="specs"?"text-[#000435]":"text-gray-600 hover:text-gray-900"}`,children:["Caractéristiques",r==="specs"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#000435]"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[r==="details"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:t.description})]}),r==="specs"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Caractéristiques techniques"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Catégorie"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.category})]}),e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"État"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.condition})]}),e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Localisation"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.location})]}),e.jsxs("div",{className:"flex justify-between py-3",children:[e.jsx("span",{className:"text-gray-600",children:"Stock disponible"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[t.stock," unités"]})]})]})]})]})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Produits similaires"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:N.map(a=>e.jsx(Q,{product:a},a.id))})]})]}),e.jsx(F,{}),e.jsx(de,{isOpen:g,onClose:()=>c(!1),sellerName:t.seller.name,phone:t.seller.phone,email:void 0,whatsapp:t.seller.whatsapp,website:t.seller.website})]})}export{Ie as default};
